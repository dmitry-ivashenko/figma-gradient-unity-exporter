<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
</head>
<body>
<button id="copyButton" style="display: none;" >Copy Gradient</button>
<pre id="debug" style="display: none; font-size: small">
    
</pre>
<script>
    document.getElementById('copyButton').onclick = () => {
        parent.postMessage({ pluginMessage: { type: 'copy-gradient' } }, '*');
    };

    onmessage = event => {
        if (event.data.pluginMessage.type === 'gradient-data') {
            const gradientData = event.data.pluginMessage.gradientData;
            copyToClipboard(JSON.stringify(gradientData, null, 2));
            displayGradientData(gradientData);
        } else if (event.data.pluginMessage.type === 'error') {
            alert(event.data.pluginMessage.message);
        } else if (event.data.pluginMessage.type === 'mode') {
            // show copyButton
            document.getElementById('copyButton').style.display = 'block';
            document.getElementById('debug').style.display = 'block';
        }
    };

    function copyToClipboard(text) {
        const input = document.createElement('textarea');
        document.body.appendChild(input);
        input.value = text;
        input.focus();
        input.select();
        const result = document.execCommand('copy');
        document.body.removeChild(input);
    }

    function displayGradientData(data) {
        const debugElement = document.getElementById('debug');
        debugElement.textContent = JSON.stringify(data, null, 2);
    }
</script>
<script type="module" src="./app.js"></script>
</body>
</html>